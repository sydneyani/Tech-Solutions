{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sydne\\\\railway-management-system\\\\frontend\\\\src\\\\components\\\\BookTrain.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport Payments from './Payments';\nimport './BookTrain.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BookTrain = () => {\n  _s();\n  const [schedules, setSchedules] = useState([]);\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\n  const [selectedScheduleData, setSelectedScheduleData] = useState(null);\n  const [selectedSeat, setSelectedSeat] = useState(null);\n  const [seats, setSeats] = useState([]);\n  const [showSeatModal, setShowSeatModal] = useState(false);\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [ticket, setTicket] = useState(null);\n  const {\n    user\n  } = useAuth();\n  const navigate = useNavigate();\n  useEffect(() => {\n    // Check if user is logged in and has appropriate role\n    if (user && user.role !== 'Passenger' && user.role !== 'Staff' && user.role !== 'Admin') {\n      navigate('/dashboard');\n      return;\n    }\n    const fetchSchedules = async () => {\n      try {\n        setLoading(true);\n        const res = await axios.get('http://localhost:5000/api/schedules');\n        setSchedules(res.data);\n        setLoading(false);\n      } catch (err) {\n        console.error('Error fetching schedules:', err);\n        setError('Failed to load train schedules');\n        setLoading(false);\n      }\n    };\n    fetchSchedules();\n  }, [user, navigate]);\n  const formatTime = timeStr => {\n    if (!timeStr) return '';\n    const date = new Date(`1970-01-01T${timeStr}Z`);\n    return date.toLocaleTimeString([], {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n  };\n  const formatDate = dateStr => {\n    if (!dateStr) return '';\n    const date = new Date(dateStr);\n    return date.toLocaleDateString(undefined, {\n      weekday: 'short',\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n\n  // Helper function to properly format the issued date\n  const formatIssuedDate = dateStr => {\n    try {\n      if (!dateStr) return 'Not available';\n\n      // Try to parse the date\n      const date = new Date(dateStr);\n\n      // Check if date is valid\n      if (isNaN(date.getTime())) {\n        console.log('Invalid date format:', dateStr);\n        return new Date().toLocaleString(); // Fallback to current date\n      }\n\n      // Return formatted date\n      return date.toLocaleString();\n    } catch (error) {\n      console.error('Error formatting issued date:', error);\n      return new Date().toLocaleString(); // Fallback to current date\n    }\n  };\n  const bookSeat = async schedule => {\n    try {\n      setLoading(true);\n      setError(null);\n      const res = await axios.get(`http://localhost:5000/api/schedules/seats/${schedule.schedule_id}`);\n      setSelectedSchedule(schedule.schedule_id);\n      setSelectedScheduleData(schedule);\n      setSeats(res.data);\n      setShowSeatModal(true);\n      setLoading(false);\n    } catch (err) {\n      console.error('Error fetching seats:', err);\n      setError('Failed to load seats');\n      setLoading(false);\n    }\n  };\n  const handleSeatClick = seat => {\n    // Instead of immediately booking, store the selected seat and show payment modal\n    setSelectedSeat(seat);\n    setShowPaymentModal(true);\n  };\n  const handlePaymentSuccess = ticketData => {\n    console.log('Payment success, ticket data:', ticketData);\n    setTicket(ticketData);\n    setShowPaymentModal(false);\n    setShowSeatModal(false);\n    // Show ticket confirmation\n  };\n  const handlePaymentCancel = () => {\n    setShowPaymentModal(false);\n    setSelectedSeat(null);\n  };\n  const handleBookingComplete = () => {\n    // Reset states and navigate user back\n    setTicket(null);\n    setSelectedSeat(null);\n    setSelectedSchedule(null);\n    setSelectedScheduleData(null);\n\n    // Refresh schedules to show updated seat availability\n    const fetchSchedules = async () => {\n      try {\n        const res = await axios.get('http://localhost:5000/api/schedules');\n        setSchedules(res.data);\n      } catch (err) {\n        console.error('Error fetching schedules:', err);\n      }\n    };\n    fetchSchedules();\n  };\n\n  // If user not logged in or not a passenger/staff/admin, don't show the component\n  if (!user || user.role !== 'Passenger' && user.role !== 'Staff' && user.role !== 'Admin') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"booktrain-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-message\",\n        children: \"You don't have permission to access this page.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"booktrain-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83D\\uDE86 Available Trains\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading trains...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }, this) : schedules.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No schedules found\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Train\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Departure\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Arrival\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Action\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: schedules.map(schedule => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"train-label\",\n              children: schedule.train_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 19\n            }, this), (user === null || user === void 0 ? void 0 : user.role) === 'Admin' && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"gear-icon\",\n              onClick: () => navigate('/admin'),\n              title: \"Manage Train\",\n              children: \"\\u2699\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: formatDate(schedule.travel_date)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: formatTime(schedule.departure_time)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: formatTime(schedule.arrival_time)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => bookSeat(schedule),\n              disabled: loading,\n              children: \"Book\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 17\n          }, this)]\n        }, schedule.schedule_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }, this), showSeatModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seat-modal\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Select a Seat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading seats...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"train-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: selectedScheduleData === null || selectedScheduleData === void 0 ? void 0 : selectedScheduleData.train_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 22\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [formatDate(selectedScheduleData === null || selectedScheduleData === void 0 ? void 0 : selectedScheduleData.travel_date), \" \\u2022 \", formatTime(selectedScheduleData === null || selectedScheduleData === void 0 ? void 0 : selectedScheduleData.departure_time), \" to \", formatTime(selectedScheduleData === null || selectedScheduleData === void 0 ? void 0 : selectedScheduleData.arrival_time)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"train-outline\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"seats-grid\",\n              children: seats.map(seat => /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `seat-btn ${seat.is_booked ? 'taken' : ''}`,\n                onClick: () => !seat.is_booked && handleSeatClick(seat),\n                disabled: seat.is_booked,\n                children: seat.seat_number\n              }, seat.seat_id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"seat-legend\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"legend-color available\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Available\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"legend-color taken\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Booked\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"close-btn\",\n          onClick: () => setShowSeatModal(false),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 9\n    }, this), showPaymentModal && /*#__PURE__*/_jsxDEV(Payments, {\n      seat: selectedSeat,\n      schedule: selectedScheduleData,\n      user: user,\n      selectedSchedule: selectedSchedule,\n      onSuccess: handlePaymentSuccess,\n      onCancel: handlePaymentCancel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 9\n    }, this), ticket && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seat-modal\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content ticket-confirmation\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83C\\uDFAB Ticket Confirmed!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ticket-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Ticket ID:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 18\n            }, this), \" \", ticket.ticket_id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Train:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 18\n            }, this), \" \", ticket.train_name || (selectedScheduleData === null || selectedScheduleData === void 0 ? void 0 : selectedScheduleData.train_name)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 18\n            }, this), \" \", formatDate(ticket.travel_date || (selectedScheduleData === null || selectedScheduleData === void 0 ? void 0 : selectedScheduleData.travel_date))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Time:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 18\n            }, this), \" \", formatTime(ticket.departure_time || (selectedScheduleData === null || selectedScheduleData === void 0 ? void 0 : selectedScheduleData.departure_time)), \" to \", formatTime(ticket.arrival_time || (selectedScheduleData === null || selectedScheduleData === void 0 ? void 0 : selectedScheduleData.arrival_time))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Seat:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 18\n            }, this), \" \", ticket.seat_number || (selectedSeat === null || selectedSeat === void 0 ? void 0 : selectedSeat.seat_number)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Passenger:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 18\n            }, this), \" \", ticket.passenger_name || `${user === null || user === void 0 ? void 0 : user.first_name} ${user === null || user === void 0 ? void 0 : user.last_name}`]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Issued:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 18\n            }, this), \" \", formatIssuedDate(ticket.issued_date)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ticket-actions\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleBookingComplete,\n            children: \"Done\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 5\n  }, this);\n};\n_s(BookTrain, \"qthsLBqJWECA/+wclYb1bcHHQq8=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = BookTrain;\nexport default BookTrain;\nvar _c;\n$RefreshReg$(_c, \"BookTrain\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","useAuth","Payments","jsxDEV","_jsxDEV","Fragment","_Fragment","BookTrain","_s","schedules","setSchedules","selectedSchedule","setSelectedSchedule","selectedScheduleData","setSelectedScheduleData","selectedSeat","setSelectedSeat","seats","setSeats","showSeatModal","setShowSeatModal","showPaymentModal","setShowPaymentModal","loading","setLoading","error","setError","ticket","setTicket","user","navigate","role","fetchSchedules","res","get","data","err","console","formatTime","timeStr","date","Date","toLocaleTimeString","hour","minute","hour12","formatDate","dateStr","toLocaleDateString","undefined","weekday","year","month","day","formatIssuedDate","isNaN","getTime","log","toLocaleString","bookSeat","schedule","schedule_id","handleSeatClick","seat","handlePaymentSuccess","ticketData","handlePaymentCancel","handleBookingComplete","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","train_name","onClick","title","travel_date","departure_time","arrival_time","disabled","is_booked","seat_number","seat_id","onSuccess","onCancel","ticket_id","passenger_name","first_name","last_name","issued_date","_c","$RefreshReg$"],"sources":["C:/Users/Sydne/railway-management-system/frontend/src/components/BookTrain.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport Payments from './Payments';\r\nimport './BookTrain.css';\r\n\r\nconst BookTrain = () => {\r\n  const [schedules, setSchedules] = useState([]);\r\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\r\n  const [selectedScheduleData, setSelectedScheduleData] = useState(null);\r\n  const [selectedSeat, setSelectedSeat] = useState(null);\r\n  const [seats, setSeats] = useState([]);\r\n  const [showSeatModal, setShowSeatModal] = useState(false);\r\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [ticket, setTicket] = useState(null);\r\n\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    // Check if user is logged in and has appropriate role\r\n    if (user && user.role !== 'Passenger' && user.role !== 'Staff' && user.role !== 'Admin') {\r\n      navigate('/dashboard');\r\n      return;\r\n    }\r\n    \r\n    const fetchSchedules = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const res = await axios.get('http://localhost:5000/api/schedules');\r\n        setSchedules(res.data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error('Error fetching schedules:', err);\r\n        setError('Failed to load train schedules');\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchSchedules();\r\n  }, [user, navigate]);\r\n\r\n  const formatTime = (timeStr) => {\r\n    if (!timeStr) return '';\r\n    const date = new Date(`1970-01-01T${timeStr}Z`);\r\n    return date.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit', hour12: true });\r\n  };\r\n\r\n  const formatDate = (dateStr) => {\r\n    if (!dateStr) return '';\r\n    const date = new Date(dateStr);\r\n    return date.toLocaleDateString(undefined, {\r\n      weekday: 'short',\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n    });\r\n  };\r\n  \r\n  // Helper function to properly format the issued date\r\n  const formatIssuedDate = (dateStr) => {\r\n    try {\r\n      if (!dateStr) return 'Not available';\r\n      \r\n      // Try to parse the date\r\n      const date = new Date(dateStr);\r\n      \r\n      // Check if date is valid\r\n      if (isNaN(date.getTime())) {\r\n        console.log('Invalid date format:', dateStr);\r\n        return new Date().toLocaleString(); // Fallback to current date\r\n      }\r\n      \r\n      // Return formatted date\r\n      return date.toLocaleString();\r\n    } catch (error) {\r\n      console.error('Error formatting issued date:', error);\r\n      return new Date().toLocaleString(); // Fallback to current date\r\n    }\r\n  };\r\n\r\n  const bookSeat = async (schedule) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const res = await axios.get(`http://localhost:5000/api/schedules/seats/${schedule.schedule_id}`);\r\n      setSelectedSchedule(schedule.schedule_id);\r\n      setSelectedScheduleData(schedule);\r\n      setSeats(res.data);\r\n      setShowSeatModal(true);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error('Error fetching seats:', err);\r\n      setError('Failed to load seats');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSeatClick = (seat) => {\r\n    // Instead of immediately booking, store the selected seat and show payment modal\r\n    setSelectedSeat(seat);\r\n    setShowPaymentModal(true);\r\n  };\r\n\r\n  const handlePaymentSuccess = (ticketData) => {\r\n    console.log('Payment success, ticket data:', ticketData);\r\n    setTicket(ticketData);\r\n    setShowPaymentModal(false);\r\n    setShowSeatModal(false);\r\n    // Show ticket confirmation\r\n  };\r\n\r\n  const handlePaymentCancel = () => {\r\n    setShowPaymentModal(false);\r\n    setSelectedSeat(null);\r\n  };\r\n\r\n  const handleBookingComplete = () => {\r\n    // Reset states and navigate user back\r\n    setTicket(null);\r\n    setSelectedSeat(null);\r\n    setSelectedSchedule(null);\r\n    setSelectedScheduleData(null);\r\n    \r\n    // Refresh schedules to show updated seat availability\r\n    const fetchSchedules = async () => {\r\n      try {\r\n        const res = await axios.get('http://localhost:5000/api/schedules');\r\n        setSchedules(res.data);\r\n      } catch (err) {\r\n        console.error('Error fetching schedules:', err);\r\n      }\r\n    };\r\n    fetchSchedules();\r\n  };\r\n\r\n  // If user not logged in or not a passenger/staff/admin, don't show the component\r\n  if (!user || (user.role !== 'Passenger' && user.role !== 'Staff' && user.role !== 'Admin')) {\r\n    return <div className=\"booktrain-container\">\r\n      <div className=\"auth-message\">You don't have permission to access this page.</div>\r\n    </div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"booktrain-container\">\r\n      <h2>🚆 Available Trains</h2>\r\n      \r\n      {error && <div className=\"error-message\">{error}</div>}\r\n      \r\n      {loading ? (\r\n        <p>Loading trains...</p>\r\n      ) : schedules.length === 0 ? (\r\n        <p>No schedules found</p>\r\n      ) : (\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Train</th>\r\n              <th>Date</th>\r\n              <th>Departure</th>\r\n              <th>Arrival</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {schedules.map((schedule) => (\r\n              <tr key={schedule.schedule_id}>\r\n                <td>\r\n                  <span className=\"train-label\">{schedule.train_name}</span>\r\n                  {user?.role === 'Admin' && (\r\n                    <span\r\n                      className=\"gear-icon\"\r\n                      onClick={() => navigate('/admin')}\r\n                      title=\"Manage Train\"\r\n                    >\r\n                      ⚙️\r\n                    </span>\r\n                  )}\r\n                </td>\r\n                <td>{formatDate(schedule.travel_date)}</td>\r\n                <td>{formatTime(schedule.departure_time)}</td>\r\n                <td>{formatTime(schedule.arrival_time)}</td>\r\n                <td>\r\n                  <button \r\n                    onClick={() => bookSeat(schedule)}\r\n                    disabled={loading}\r\n                  >\r\n                    Book\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n\r\n      {/* Seat Selection Modal */}\r\n      {showSeatModal && (\r\n        <div className=\"seat-modal\">\r\n          <div className=\"modal-content\">\r\n            <h3>Select a Seat</h3>\r\n            {loading ? (\r\n              <p>Loading seats...</p>\r\n            ) : (\r\n              <>\r\n                <div className=\"train-info\">\r\n                  <p><strong>{selectedScheduleData?.train_name}</strong></p>\r\n                  <p>{formatDate(selectedScheduleData?.travel_date)} • {formatTime(selectedScheduleData?.departure_time)} to {formatTime(selectedScheduleData?.arrival_time)}</p>\r\n                </div>\r\n                <div className=\"train-outline\">\r\n                  <div className=\"seats-grid\">\r\n                    {seats.map(seat => (\r\n                      <button\r\n                        key={seat.seat_id}\r\n                        className={`seat-btn ${seat.is_booked ? 'taken' : ''}`}\r\n                        onClick={() => !seat.is_booked && handleSeatClick(seat)}\r\n                        disabled={seat.is_booked}\r\n                      >\r\n                        {seat.seat_number}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n                <div className=\"seat-legend\">\r\n                  <div className=\"legend-item\">\r\n                    <div className=\"legend-color available\"></div>\r\n                    <span>Available</span>\r\n                  </div>\r\n                  <div className=\"legend-item\">\r\n                    <div className=\"legend-color taken\"></div>\r\n                    <span>Booked</span>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n            <button className=\"close-btn\" onClick={() => setShowSeatModal(false)}>Close</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Payment Modal */}\r\n      {showPaymentModal && (\r\n        <Payments\r\n          seat={selectedSeat}\r\n          schedule={selectedScheduleData}\r\n          user={user}\r\n          selectedSchedule={selectedSchedule}\r\n          onSuccess={handlePaymentSuccess}\r\n          onCancel={handlePaymentCancel}\r\n        />\r\n      )}\r\n\r\n      {/* Ticket Confirmation Modal */}\r\n      {ticket && (\r\n        <div className=\"seat-modal\">\r\n          <div className=\"modal-content ticket-confirmation\">\r\n            <h3>🎫 Ticket Confirmed!</h3>\r\n            <div className=\"ticket-details\">\r\n              <p><strong>Ticket ID:</strong> {ticket.ticket_id}</p>\r\n              <p><strong>Train:</strong> {ticket.train_name || selectedScheduleData?.train_name}</p>\r\n              <p><strong>Date:</strong> {formatDate(ticket.travel_date || selectedScheduleData?.travel_date)}</p>\r\n              <p><strong>Time:</strong> {formatTime(ticket.departure_time || selectedScheduleData?.departure_time)} to {formatTime(ticket.arrival_time || selectedScheduleData?.arrival_time)}</p>\r\n              <p><strong>Seat:</strong> {ticket.seat_number || selectedSeat?.seat_number}</p>\r\n              <p><strong>Passenger:</strong> {ticket.passenger_name || `${user?.first_name} ${user?.last_name}`}</p>\r\n              <p><strong>Issued:</strong> {formatIssuedDate(ticket.issued_date)}</p>\r\n            </div>\r\n            <div className=\"ticket-actions\">\r\n              <button onClick={handleBookingComplete}>Done</button>\r\n              {/* You could add a \"Print Ticket\" button here */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookTrain;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}